# 更新日誌 (Changelog)

## [2.0.0] - 2025-01-XX

### 🎉 重大更新

#### 新增功能
- ✨ **Supabase 資料庫整合**：支援持久化儲存，資料不會在伺服器重啟後遺失
- ✨ **設定頁面**：新增完整的設定介面，可查看帳號資訊和使用模式
- ✨ **對話管理**：註冊用戶可管理對話記錄，手動同步到雲端
- ✨ **JWT Token 認證**：更安全的 token 機制，支援過期時間
- ✨ **密碼加密**：使用 bcrypt 加密儲存用戶密碼

#### 改進
- 🔒 **安全性增強**：
  - 密碼使用 bcryptjs 加密（之前為明文）
  - Token 改用 JWT（jsonwebtoken）
  - Row Level Security (RLS) 保護資料
- 🏗️ **架構優化**：
  - 模組化程式碼結構
  - 資料庫抽象層，支援 Supabase 和記憶體儲存降級
  - 統一的錯誤處理機制
- 🎨 **UI/UX 改進**：
  - 優化歡迎畫面互動
  - 新增設定和對話管理按鈕
  - 改進 Header 佈局

#### 修復
- 🐛 修復密碼明文儲存問題
- 🐛 修復 token 驗證邏輯
- 🐛 改進資料庫連接錯誤處理

#### 技術變更
- 📦 新增依賴：
  - `@supabase/supabase-js@^2.39.0`
  - `bcryptjs@^2.4.3`
  - `jsonwebtoken@^9.0.2`
- 🔄 向後兼容：支援舊版 token 格式，平滑遷移

### 📝 文件
- 📚 新增 `SUPABASE_SETUP.md` - Supabase 設定指南
- 📚 新增 `supabase-schema.sql` - 資料庫架構 SQL
- 📚 新增 `IMPROVEMENTS.md` - 改進總結文件
- 📚 新增 `CHANGELOG.md` - 更新日誌

### ⚠️ 遷移注意事項
- 現有記憶體儲存的資料會在伺服器重啟後遺失
- 建議儘快設定 Supabase 以確保資料持久化
- 環境變數需更新（參考 `IMPROVEMENTS.md`）

## [1.0.0] - 初始版本

### 功能
- ✅ 唯獨聖經模式和聖經+網路模式
- ✅ 訪客模式和註冊模式
- ✅ 對話歷史保存（localStorage）
- ✅ 響應式設計
- ✅ 優雅的 UI 設計


